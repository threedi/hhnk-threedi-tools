[project]
channels = ["conda-forge"]
name = "hhnk-threedi-tools"
platforms = ["win-64"]
version = "2024.1"
repository = "https://https://github.com/threedi/hhnk-threedi-tools"

[tasks]
sort_imports = "python -m ruff check . --select I --fix"
fmt = "python -m ruff format ./**/*.py --force-exclude"
style = {depends-on = ["sort_imports", "fmt"]} # `pixi run style`
tests = "pytest --cov-report term-missing --cov=hhnk_threedi_tools --cov-report=xml tests/"

[dependencies]
python = "==3.9.18" # equals MI python version
geopandas = "==0.14.1"
pandas = "==2.0.2"
scipy = "==1.10.1"
h5py = "*" # Incompatible met rest van env; conda solved naar 3.11.0
fiona = "==1.9.5"
shapely = "==2.0.2"

#User folder
jupyterlab = "==4.2.0"
ipywidgets = "==8.1.2"
jupytext = "==1.16.6"

pytest = "==7.2.2"
pytest-cov = "*"
pluggy = "==1.0.0" # pytest dependency
iniconfig = "==2.0.0" # pytest dependency
tqdm = "==4.64.0"
rioxarray = "==0.15.0" # higher versions need python >=3.10
pyogrio = "==0.7.2" # 0.9.0 doesnt work with gdal
rasterio = "==1.3.10" # rxr dep
affine = "==2.4.0" # rxr dep
dask = "==2024.6.2" # rxr dep
matplotlib = "3.8.*" # 3.9.0 gives RuntimeError: Entry point name 'inline' duplicated
# See also: https://discourse.matplotlib.org/t/latest-versions-via-pip-jupyterlab-import-of-matplotlib-broken/24477/7

xarray = "==2024.3.0"
openpyxl = "==3.1.2"
cached_property = "==1.5.2"
rtree = "==1.0.1"
oracledb = "==2.4.1"
pip = "*"


[pypi-dependencies]
threedi_modelchecker = "==2.6.3" # threedi_results_analysis 3.9.0
threedi_scenario_downloader = "==1.4" # Lizard API v4 only
threedi_schema = "==0.219.3" # threedi_results_analysis 3.9.0
threedi-api-client = "==4.1.7" # 3Di Models and Simulations 3.11.0
threedigrid_builder = "==1.14.4" # threedi_results_analysis 3.9.2
threedigrid = "==2.3.3" # threedi_results_analysis 3.12.0
threedidepth = "==0.6.3" # threedi_results_analysis 3.9.0

#Editable isntalls
hhnk_threedi_tools = { path = ".", editable = true }
hhnk_research_tools = { path = "../hhnk-research-tools", editable = true }

[feature.py39.dependencies]
python = "==3.9.18"

[environments]
default = ["py39"]